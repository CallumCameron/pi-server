#!/bin/bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )" &&
source "${DIR}/common.bash" &&


set-pi-server-param "${PI_SERVER_IP_FILE}" "Enter the server's LAN IP address (MUST be correct, or nothing will work!)" &&

set-pi-server-param "${PI_SERVER_LAN_IFACE_FILE}" "Enter the server's LAN interface name (usually the ethernet interface, but may no longer be called eth0)" &&

set-pi-server-param "${PI_SERVER_FQDN_FILE}" "Enter the fully-qualified domain name of the server, as visible externally (the address to be managed by ZoneEdit, and also used as the 'From' in any email sent by the server)" &&

set-pi-server-param "${PI_SERVER_EMAIL_TARGET_FILE}" "Enter the email address any messages generated by the server should be sent to" &&

set-pi-server-param "${PI_SERVER_EMAIL_SMTP_FILE}" "Enter the SMTP server to use when sending email (usually your ISP's, or for gmail enter smtp.gmail.com)" &&

set-pi-server-param "${PI_SERVER_EMAIL_PORT_FILE}" "Enter the SMTP port to use when sending email (usually 25, or 465 if using authentication for gmail)" &&


if [ ! -f "${PI_SERVER_WAN_IFACE_FILE}" ]; then
    sudo touch "${PI_SERVER_WAN_IFACE_FILE}" &&
    sudo chown root:root "${PI_SERVER_WAN_IFACE_FILE}" &&
    sudo chmod u=rw "${PI_SERVER_WAN_IFACE_FILE}" &&
    sudo chmod go=r "${PI_SERVER_WAN_IFACE_FILE}" || exit 1
fi
